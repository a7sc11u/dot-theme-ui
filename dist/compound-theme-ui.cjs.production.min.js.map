{"version":3,"file":"compound-theme-ui.cjs.production.min.js","sources":["../src/tags.ts","../src/ui.tsx"],"sourcesContent":["export const tags = [\n  'a',\n  'abbr',\n  'address',\n  'area',\n  'article',\n  'aside',\n  'audio',\n  'b',\n  'base',\n  'bdi',\n  'bdo',\n  'big',\n  'blockquote',\n  'body',\n  'br',\n  'button',\n  'canvas',\n  'caption',\n  'cite',\n  'code',\n  'col',\n  'colgroup',\n  'data',\n  'datalist',\n  'dd',\n  'del',\n  'details',\n  'dfn',\n  'dialog',\n  'div',\n  'dl',\n  'dt',\n  'em',\n  'embed',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'footer',\n  'form',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'head',\n  'header',\n  'hgroup',\n  'hr',\n  'html',\n  'i',\n  'iframe',\n  'img',\n  'input',\n  'ins',\n  'kbd',\n  'keygen',\n  'label',\n  'legend',\n  'li',\n  'link',\n  'main',\n  'map',\n  'mark',\n  'menu',\n  'menuitem',\n  'meta',\n  'meter',\n  'nav',\n  'noscript',\n  'object',\n  'ol',\n  'optgroup',\n  'option',\n  'output',\n  'p',\n  'param',\n  'picture',\n  'pre',\n  'progress',\n  'q',\n  'rp',\n  'rt',\n  'ruby',\n  's',\n  'samp',\n  'script',\n  'section',\n  'select',\n  'small',\n  'source',\n  'span',\n  'strong',\n  'style',\n  'sub',\n  'summary',\n  'sup',\n  'table',\n  'tbody',\n  'td',\n  'textarea',\n  'tfoot',\n  'th',\n  'thead',\n  'time',\n  'title',\n  'tr',\n  'track',\n  'u',\n  'ul',\n  'var',\n  'video',\n  'wbr',\n  'webview',\n  'animate',\n  'circle',\n  'clipPath',\n  'defs',\n  'desc',\n  'ellipse',\n  'feBlend',\n  'feColorMatrix',\n  'feComponentTransfer',\n  'feComposite',\n  'feConvolveMatrix',\n  'feDiffuseLighting',\n  'feDisplacementMap',\n  'feDistantLight',\n  'feDropShadow',\n  'feFlood',\n  'feFuncA',\n  'feFuncB',\n  'feFuncG',\n  'feFuncR',\n  'feGaussianBlur',\n  'feImage',\n  'feMerge',\n  'feMergeNode',\n  'feMorphology',\n  'feOffset',\n  'fePointLight',\n  'feSpecularLighting',\n  'feSpotLight',\n  'feTile',\n  'feTurbulence',\n  'filter',\n  'foreignObject',\n  'g',\n  'image',\n  'line',\n  'linearGradient',\n  'marker',\n  'mask',\n  'metadata',\n  'path',\n  'pattern',\n  'polygon',\n  'polyline',\n  'radialGradient',\n  'rect',\n  'stop',\n  'svg',\n  'switch',\n  'symbol',\n  'text',\n  'textPath',\n  'tspan',\n  'use',\n  'view',\n];\n","import * as React from 'react';\nimport { jsx } from 'theme-ui';\n\nimport { tags } from './tags';\n\nconst UIContext = React.createContext({});\n\nconst isEmptyObject = obj =>\n  Object.entries(obj).length === 0 && obj.constructor === Object;\n\nconst getVariants = vx => use => {\n  if (!vx) return ``;\n  let sx = {};\n\n  // for (const key in vx) {\n  //   const variant = vx[key];\n  //   const propsValue = props[key];\n  //   if (is.array(variant)) {\n  //     const arrayIndexValue = is.exists(propsValue)\n  //       ? propsValue\n  //       : variant.findIndex(f => f.initial);\n  //     if (is.exists(arrayIndexValue)) {\n  //       let sx = get(variant, arrayIndexValue, undefined);\n  //       let styles: any = typeof sx === 'function' ? sx(theme) : sx;\n  //       rules = deepmerge(rules, styles);\n  //     }\n  //   } else {\n  //     if (is.truthy(propsValue) || key === 'initial') {\n  //       let sx = vx[key];\n  //       let styles: any = typeof sx === 'function' ? sx(theme) : sx;\n  //       rules = deepmerge(rules, styles);\n  //     }\n  //   }\n  // }\n  return sx;\n};\n\n/**\n * Create UI Component Higher order function\n */\nfunction createUIComponent(component) {\n  const UiComponent = (props, ref) => {\n    // const { vx = {}, orphan = false, root = false } = props;\n    // const hasVariantsX = isEmptyObject(vx);\n\n    const { context, parentContext } = useUIContext(props);\n\n    // populate jsx props\n    const jsxProps = {\n      // don't use context props if orphan or root\n      // ...(!orphan && !root && hasVariantsX ? parentContext : null),\n      ...props,\n      ref,\n    };\n\n    return (\n      <UIContext.Provider value={context}>\n        {jsx(component, jsxProps)}\n      </UIContext.Provider>\n    );\n  };\n\n  return React.forwardRef(UiComponent);\n}\n\nconst useUIContext = props => {\n  const { vx = {}, use = {}, root = false } = props;\n\n  // get parent context\n  const parentContext = React.useContext(UIContext);\n\n  // don't use parent context if root\n  const context = root ? {} : { ...parentContext };\n\n  // using only its own vx keys,\n  // look for applied props and\n  Object.keys(vx).forEach(k => {\n    if (use.hasOwnProperty(k)) {\n      context[k] = props[k];\n    }\n  });\n  return { context, parentContext };\n};\n\nconst UIFragment = React.forwardRef((props, ref) => {\n  const { context } = useUIContext(props);\n\n  return (\n    <UIContext.Provider value={context}>\n      <React.Fragment>{props.children}</React.Fragment>\n    </UIContext.Provider>\n  );\n});\n\nexport const ui = tags.reduce(\n  (res, tag) => {\n    res[tag] = createUIComponent(tag);\n    return res;\n  },\n  {\n    as: ({ tag, ...rest }) => {\n      const Tag = createUIComponent(tag);\n      return <Tag {...rest} />;\n    },\n    custom: createUIComponent,\n    fragment: UIFragment,\n  }\n);\n"],"names":["UIContext","React","createUIComponent","component","props","ref","context","useUIContext","jsxProps","Provider","value","jsx","vx","use","root","parentContext","Object","keys","forEach","k","hasOwnProperty","reduce","res","tag","as","rest","Tag","custom","fragment","children"],"mappings":"yQAAO,ICKDA,EAAYC,gBAAoB,IAmCtC,SAASC,EAAkBC,UAsBlBF,cArBa,SAACG,EAAOC,OAIlBC,EAA2BC,EAAaH,GAAxCE,QAGFE,OAGDJ,GACHC,IAAAA,WAIAJ,gBAACD,EAAUS,UAASC,MAAOJ,GACxBK,MAAIR,EAAWK,OAQxB,IAAMD,EAAe,SAAAH,SACyBA,EAApCQ,GAAAA,aAAK,OAA+BR,EAA3BS,IAAAA,aAAM,OAAqBT,EAAjBU,KAAAA,gBAGrBC,EAAgBd,aAAiBD,GAGjCM,EAAUQ,EAAO,QAAUC,UAIjCC,OAAOC,KAAKL,GAAIM,SAAQ,SAAAC,GAClBN,EAAIO,eAAeD,KACrBb,EAAQa,GAAKf,EAAMe,OAGhB,CAAEb,QAAAA,EAASS,cAAAA,eDjFA,CAClB,IACA,OACA,UACA,OACA,UACA,QACA,QACA,IACA,OACA,MACA,MACA,MACA,aACA,OACA,KACA,SACA,SACA,UACA,OACA,OACA,MACA,WACA,OACA,WACA,KACA,MACA,UACA,MACA,SACA,MACA,KACA,KACA,KACA,QACA,WACA,aACA,SACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,SACA,MACA,QACA,MACA,MACA,SACA,QACA,SACA,KACA,OACA,OACA,MACA,OACA,OACA,WACA,OACA,QACA,MACA,WACA,SACA,KACA,WACA,SACA,SACA,IACA,QACA,UACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,SACA,UACA,SACA,QACA,SACA,OACA,SACA,QACA,MACA,UACA,MACA,QACA,QACA,KACA,WACA,QACA,KACA,QACA,OACA,QACA,KACA,QACA,IACA,KACA,MACA,QACA,MACA,UACA,UACA,SACA,WACA,OACA,OACA,UACA,UACA,gBACA,sBACA,cACA,mBACA,oBACA,oBACA,iBACA,eACA,UACA,UACA,UACA,UACA,UACA,iBACA,UACA,UACA,cACA,eACA,WACA,eACA,qBACA,cACA,SACA,eACA,SACA,gBACA,IACA,QACA,OACA,iBACA,SACA,OACA,WACA,OACA,UACA,UACA,WACA,iBACA,OACA,OACA,MACA,SACA,SACA,OACA,WACA,QACA,MACA,QC3EqBM,QACrB,SAACC,EAAKC,UACJD,EAAIC,GAAOrB,EAAkBqB,GACtBD,IAET,CACEE,GAAI,gBAAGD,IAAAA,IAAQE,gJACPC,EAAMxB,EAAkBqB,UACvBtB,gBAACyB,mBAAQD,KAElBE,OAAQzB,EACR0B,SArBe3B,cAAiB,SAACG,EAAOC,SACtBE,EAAaH,UAG/BH,gBAACD,EAAUS,UAASC,QAHdJ,SAIJL,gBAACA,gBAAgBG,EAAMyB"}