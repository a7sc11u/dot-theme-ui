{"version":3,"file":"compound-theme-ui.cjs.development.js","sources":["../src/tags.ts","../src/ui.tsx"],"sourcesContent":["export const tags = [\n  'a',\n  'abbr',\n  'address',\n  'area',\n  'article',\n  'aside',\n  'audio',\n  'b',\n  'base',\n  'bdi',\n  'bdo',\n  'big',\n  'blockquote',\n  'body',\n  'br',\n  'button',\n  'canvas',\n  'caption',\n  'cite',\n  'code',\n  'col',\n  'colgroup',\n  'data',\n  'datalist',\n  'dd',\n  'del',\n  'details',\n  'dfn',\n  'dialog',\n  'div',\n  'dl',\n  'dt',\n  'em',\n  'embed',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'footer',\n  'form',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'head',\n  'header',\n  'hgroup',\n  'hr',\n  'html',\n  'i',\n  'iframe',\n  'img',\n  'input',\n  'ins',\n  'kbd',\n  'keygen',\n  'label',\n  'legend',\n  'li',\n  'link',\n  'main',\n  'map',\n  'mark',\n  'menu',\n  'menuitem',\n  'meta',\n  'meter',\n  'nav',\n  'noscript',\n  'object',\n  'ol',\n  'optgroup',\n  'option',\n  'output',\n  'p',\n  'param',\n  'picture',\n  'pre',\n  'progress',\n  'q',\n  'rp',\n  'rt',\n  'ruby',\n  's',\n  'samp',\n  'script',\n  'section',\n  'select',\n  'small',\n  'source',\n  'span',\n  'strong',\n  'style',\n  'sub',\n  'summary',\n  'sup',\n  'table',\n  'tbody',\n  'td',\n  'textarea',\n  'tfoot',\n  'th',\n  'thead',\n  'time',\n  'title',\n  'tr',\n  'track',\n  'u',\n  'ul',\n  'var',\n  'video',\n  'wbr',\n  'webview',\n  'animate',\n  'circle',\n  'clipPath',\n  'defs',\n  'desc',\n  'ellipse',\n  'feBlend',\n  'feColorMatrix',\n  'feComponentTransfer',\n  'feComposite',\n  'feConvolveMatrix',\n  'feDiffuseLighting',\n  'feDisplacementMap',\n  'feDistantLight',\n  'feDropShadow',\n  'feFlood',\n  'feFuncA',\n  'feFuncB',\n  'feFuncG',\n  'feFuncR',\n  'feGaussianBlur',\n  'feImage',\n  'feMerge',\n  'feMergeNode',\n  'feMorphology',\n  'feOffset',\n  'fePointLight',\n  'feSpecularLighting',\n  'feSpotLight',\n  'feTile',\n  'feTurbulence',\n  'filter',\n  'foreignObject',\n  'g',\n  'image',\n  'line',\n  'linearGradient',\n  'marker',\n  'mask',\n  'metadata',\n  'path',\n  'pattern',\n  'polygon',\n  'polyline',\n  'radialGradient',\n  'rect',\n  'stop',\n  'svg',\n  'switch',\n  'symbol',\n  'text',\n  'textPath',\n  'tspan',\n  'use',\n  'view',\n];\n","import * as React from 'react';\nimport { jsx } from 'theme-ui';\n\nimport { tags } from './tags';\n\nconst UIContext = React.createContext({});\n\nconst isEmptyObject = obj =>\n  Object.entries(obj).length === 0 && obj.constructor === Object;\n\nconst getVariants = vx => use => {\n  if (!vx) return ``;\n  let sx = {};\n\n  // for (const key in vx) {\n  //   const variant = vx[key];\n  //   const propsValue = props[key];\n  //   if (is.array(variant)) {\n  //     const arrayIndexValue = is.exists(propsValue)\n  //       ? propsValue\n  //       : variant.findIndex(f => f.initial);\n  //     if (is.exists(arrayIndexValue)) {\n  //       let sx = get(variant, arrayIndexValue, undefined);\n  //       let styles: any = typeof sx === 'function' ? sx(theme) : sx;\n  //       rules = deepmerge(rules, styles);\n  //     }\n  //   } else {\n  //     if (is.truthy(propsValue) || key === 'initial') {\n  //       let sx = vx[key];\n  //       let styles: any = typeof sx === 'function' ? sx(theme) : sx;\n  //       rules = deepmerge(rules, styles);\n  //     }\n  //   }\n  // }\n  return sx;\n};\n\n/**\n * Create UI Component Higher order function\n */\nfunction createUIComponent(component) {\n  const UiComponent = (props, ref) => {\n    // const { vx = {}, orphan = false, root = false } = props;\n    // const hasVariantsX = isEmptyObject(vx);\n\n    const { context, parentContext } = useUIContext(props);\n\n    // populate jsx props\n    const jsxProps = {\n      // don't use context props if orphan or root\n      // ...(!orphan && !root && hasVariantsX ? parentContext : null),\n      ...props,\n      ref,\n    };\n\n    return (\n      <UIContext.Provider value={context}>\n        {jsx(component, jsxProps)}\n      </UIContext.Provider>\n    );\n  };\n\n  return React.forwardRef(UiComponent);\n}\n\nconst useUIContext = props => {\n  const { vx = {}, use = {}, root = false } = props;\n\n  // get parent context\n  const parentContext = React.useContext(UIContext);\n\n  // don't use parent context if root\n  const context = root ? {} : { ...parentContext };\n\n  // using only its own vx keys,\n  // look for applied props and\n  Object.keys(vx).forEach(k => {\n    if (use.hasOwnProperty(k)) {\n      context[k] = props[k];\n    }\n  });\n  return { context, parentContext };\n};\n\nconst UIFragment = React.forwardRef((props, ref) => {\n  const { context } = useUIContext(props);\n\n  return (\n    <UIContext.Provider value={context}>\n      <React.Fragment>{props.children}</React.Fragment>\n    </UIContext.Provider>\n  );\n});\n\nexport const ui = tags.reduce(\n  (res, tag) => {\n    res[tag] = createUIComponent(tag);\n    return res;\n  },\n  {\n    as: ({ tag, ...rest }) => {\n      const Tag = createUIComponent(tag);\n      return <Tag {...rest} />;\n    },\n    custom: createUIComponent,\n    fragment: UIFragment,\n  }\n);\n"],"names":["tags","UIContext","React","createUIComponent","component","UiComponent","props","ref","useUIContext","context","jsxProps","Provider","value","jsx","vx","use","root","parentContext","Object","keys","forEach","k","hasOwnProperty","UIFragment","children","ui","reduce","res","tag","as","rest","Tag","custom","fragment"],"mappings":"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"}